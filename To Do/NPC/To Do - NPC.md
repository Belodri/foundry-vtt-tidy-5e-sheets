## Top of Mind

- [ ] Lair Action Initiative input is not allowing me to clear it out. It always sets it to 0. Fix that.
- [ ] "TIDY5E.EmptySection" / "This section is empty. Unlock the sheet to edit." banner should show in the player character sheet Inventory tab when allow-edit is false and there are no inventory sections shown
- [ ] PC spellbook tab
  - [ ] "DND5E.NoSpellLevels": "This character has no spellcaster levels, but you may add spells manually." if `filters.spellbook.size` is false / 0
  - [ ] "TIDY5E.EmptySection" / "This section is empty. Unlock the sheet to edit." if allow-edit is false and there are no spells
- [ ] PC features tab
  - [ ] "TIDY5E.EmptySection" / "This section is empty. Unlock the sheet to edit." if allow-edit is false and there are no features and it's locked
- [ ] Ditto PC effects tab


## To Do


- [x] Register the sheet as a child of the original 5e sheet
- [x] Fill out the sheet stuff for svelte mode
- [ ] Implement
  - [ ] Full NPC
    - [x] Header
      - [x] HTML
        - [x] Profile
        - [x] Header Stats / INfo
      - [x] SCSS
        - [x] Exhaustion Rounded
        - [x] Exhaustion Squared
        - [x] Rest Rounded
        - [x] Rest Squared
        - [x] Hit Dice Rounded
        - [x] Hit Dice Squared
        - [x] Name row
        - [x] size / origin row
        - [x] speed row
        - [x] Abilities row
      - [x] Behaviors
    - [ ] Tab nav and stub/share components
      - [ ] Abilities
        - [x] Side bar
        - [x] Footer (money)
        - [x] Main content area
          - [x] Legendary actions
            - [x] HTML
            - [x] SCSS
            - [x] Behaviors (lock/unlock/show/hide)
          - [x] Features(?): Return to tidy5e-features.html to harvest the setup specifically tailored for NPC
            - [x] HTML
            - [x] SCSS
            - [x] Behaviors
              - [x] Edit on Locked
              - [x] Edit / Dupe / Delete on Unlocked
              - [x] Hide empty section on locked
              - [x] Show Add button on unlocked
        - [ ] Settings
          - [ ] hideSpellbookTabNpc
            - [ ] when on: include equivalent of tidy5e-npc-spellbook template
              - [x] HTML
              - [x] SCSS
              - [x] Behaviors
              - [ ] Configure No Spellcaster levels notice while locked
                - [ ] While unlocked, also include Create Button itemtablefooter
                - [ ] Ensure this same applies to both List and Grid in their own ways.
            - [x] note: give this one a look before completely committing to the currency footer I made
          - [x] alt trait position : just below legendary actions
      - [ ] Spellbook
        - [ ] HTML : this is the exact same spellbook tab as the PC; try your best to reuse verbatim, including all supporting features like filtering and grid layout.
          - [ ] The Differences
            - [ ] NPC: No preparation button
            - [ ] NPC: No favorites button
            - [ ] NPC: Add Spellcaster Level
        - [ ] SCSS
        - [ ] Behaviors
        - [ ] Settings
            - [ ] hideSpellbookTabNpc
              - [ ] when on: hide the spellbook tab altogether
              - [ ] now that this exists, go back and include the spells list in the abilities tab when on
      - [ ] Effects
      - [ ] Biography
      - [ ] Journal
      - [ ] Toggle Lock
    - [ ] Tab Contents
      - [ ] Abilities
      - [ ] Spellbook
      - [ ] Effects
      - [ ] Biography
      - [ ] Journal
  - [ ] Ltd NPC
    - [ ] Configure to appear when user is NOT GM and actor is limited
    - [ ] Biography
- [ ] Settings
  - [ ] ...

## Refactor and Refine

- [x] Do we want to use a base sheet for all actors? No, because they all use different context from established sheets.
- [ ] Move `_inventory` and `_inventory-grid` styles to where they should go in the components
- [ ] Cannibalize as many `_character-sheet` styles as possible to where they should go in the components
- [ ] Extract a universal portait container that directs rounded styles and anything else that can be shareable
  - [ ] Cannibalize the global styles which are shared by NPC and Character profiles
- [ ] Consider converting `tooltip` to just `title` on text inputs
- [ ] Add prop obj `inputProps` on `TextInput`; move all input props that have direct equivalents in input elements out of the main component and into the inputProps obj and spread that on the underlying input
  - [ ] Ditto on `Select`
  - [ ] Ditto on `NumberInput`
- [ ] Have `TextInput` respect dtype "Number" and perform deltas as expected. The functionality currently lives in `submitText()`.
  - [ ] Consider refactoring so that callers of `submitText()` are adjusted to use `TextInput` or `NumberInput` as necessary.
- [ ] When an update operation fails, revert to the original value.
  - [x] Contenteditable
  - [ ] Textinput
  - [ ] Numberinput
  - [ ] Select
  - [ ] Checkbox
- [ ] `dtype` fields: formalize these as features of the input components, rather than just receiving them. Give the props names.
  - [ ] One way to go about this would be to have a universal function for preparing data for saving. It could take things like dtype, which would be set to known values.
  - [ ] Also figure out how to do the `draftValue` reversion on failed save approach without having to copy/paste it everywhere.